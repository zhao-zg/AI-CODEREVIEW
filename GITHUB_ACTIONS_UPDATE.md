# GitHub Actions Docker æ„å»ºé…ç½®æ›´æ–°

## ğŸ”§ ä¿®å¤å†…å®¹

### é—®é¢˜æè¿°
GitHub Actions å·¥ä½œæµä¸­ä»åœ¨ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºçš„ `target: app` å’Œ `target: worker` å‚æ•°ï¼Œä½†é¡¹ç›®å·²è¿ç§»ä¸ºå•æœåŠ¡å•å®¹å™¨æ¶æ„ã€‚

### ä¿®å¤æ–¹æ¡ˆ

#### 1. ç§»é™¤å¤šé˜¶æ®µæ„å»ºç›®æ ‡
**ä¿®å¤å‰ï¼š**
```yaml
- name: Build and push app image to GHCR
  uses: docker/build-push-action@v5
  with:
    target: app  # âŒ å¯¼è‡´é”™è¯¯
    
- name: Build and push worker image to GHCR  
  uses: docker/build-push-action@v5
  with:  
    target: worker  # âŒ å¯¼è‡´é”™è¯¯
```

**ä¿®å¤åï¼š**
```yaml
- name: Build and push Docker image to GHCR
  uses: docker/build-push-action@v5
  with:
    # âœ… ç§»é™¤ target å‚æ•°ï¼Œä½¿ç”¨å•é˜¶æ®µæ„å»º
    
- name: Build and push Docker image to Docker Hub
  uses: docker/build-push-action@v5
  with:
    # âœ… ç§»é™¤ target å‚æ•°ï¼Œä½¿ç”¨å•é˜¶æ®µæ„å»º
```

#### 2. ç®€åŒ–æ„å»ºæµç¨‹

**ä¹‹å‰ï¼ˆå¤šå®¹å™¨ï¼‰ï¼š**
- æ„å»º `app` é•œåƒï¼ˆAPI + UIï¼‰
- æ„å»º `worker` é•œåƒï¼ˆåå°ä»»åŠ¡ï¼‰
- éœ€è¦ 4 ä¸ªæ„å»ºæ­¥éª¤

**ç°åœ¨ï¼ˆå•æœåŠ¡ï¼‰ï¼š**
- æ„å»ºå•ä¸ªé•œåƒï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼‰
- åªéœ€è¦ 2 ä¸ªæ„å»ºæ­¥éª¤
- æ¨é€åˆ° GHCR å’Œ Docker Hub

## ğŸš€ ä¼˜åŒ–æ•ˆæœ

### æ„å»ºæ—¶é—´ä¼˜åŒ–
- **å‡å°‘æ„å»ºæ­¥éª¤**ï¼šä» 4 ä¸ªå‡å°‘åˆ° 2 ä¸ª
- **å‡å°‘é•œåƒå±‚æ•°**ï¼šå•é˜¶æ®µæ„å»ºæ›´é«˜æ•ˆ
- **å‡å°‘æ¨é€æ—¶é—´**ï¼šåªéœ€æ¨é€ä¸€ä¸ªé•œåƒ

### ç»´æŠ¤æˆæœ¬é™ä½
- **ç®€åŒ– CI/CD é…ç½®**ï¼šæ›´å°‘çš„æ„å»ºæ­¥éª¤
- **å‡å°‘é•œåƒç®¡ç†**ï¼šåªéœ€ç»´æŠ¤ä¸€ä¸ªé•œåƒ
- **é™ä½å­˜å‚¨æˆæœ¬**ï¼šå‡å°‘é•œåƒæ•°é‡

## ğŸ“Š æ„å»ºé…ç½®å¯¹æ¯”

| é¡¹ç›® | å¤šå®¹å™¨æ¶æ„ | å•æœåŠ¡æ¶æ„ |
|------|------------|------------|
| æ„å»ºæ­¥éª¤ | 4 ä¸ª | 2 ä¸ª |
| é•œåƒæ•°é‡ | 2 ä¸ª | 1 ä¸ª |
| æ„å»ºæ—¶é—´ | é•¿ | çŸ­ |
| é…ç½®å¤æ‚åº¦ | é«˜ | ä½ |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä½ |

## ğŸ¯ éªŒè¯æ–¹æ³•

### æœ¬åœ°éªŒè¯
```bash
# éªŒè¯ Dockerfile è¯­æ³•
docker build --dry-run -t ai-codereview .

# å®é™…æ„å»ºæµ‹è¯•
docker build -t ai-codereview .
```

### CI/CD éªŒè¯
1. æäº¤ä¿®æ”¹åˆ° GitHub
2. æ£€æŸ¥ Actions é¡µé¢æ„å»ºçŠ¶æ€
3. éªŒè¯é•œåƒæˆåŠŸæ¨é€åˆ°æ³¨å†Œè¡¨

## âœ… ä¿®å¤ç¡®è®¤

- âœ… ç§»é™¤äº† `target: app` å‚æ•°
- âœ… ç§»é™¤äº† `target: worker` å‚æ•°  
- âœ… ç®€åŒ–ä¸ºå•æœåŠ¡æ„å»ºæµç¨‹
- âœ… ä¿æŒäº†åŒæ³¨å†Œè¡¨æ¨é€ï¼ˆGHCR + Docker Hubï¼‰
- âœ… ä¿æŒäº†å¤šå¹³å°æ„å»ºï¼ˆlinux/amd64, linux/arm64ï¼‰

---
ğŸ‰ **GitHub Actions å·¥ä½œæµå·²æˆåŠŸæ›´æ–°ä¸ºå•æœåŠ¡æ¶æ„ï¼**
